<UserControl x:Class="CourseWork_Prog_Lang_Compiler.Views.InterpreterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="900">
    <Grid Margin="5">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>

        <!-- Левая часть: Таблица ПОЛИЗ -->
        <GroupBox Header="Сгенерированный ПОЛИЗ" Grid.Column="0" Margin="0,0,5,0">
            <DataGrid ItemsSource="{Binding PolizItems}" 
                      AutoGenerateColumns="False" 
                      IsReadOnly="True"
                      CanUserAddRows="False"
                      GridLinesVisibility="Horizontal"
                      ScrollViewer.VerticalScrollBarVisibility="Visible">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="idx" Binding="{Binding Index}" Width="40" FontWeight="Bold"/>
                    <DataGridTextColumn Header="Команда" Binding="{Binding Command}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>

        <!-- Правая часть: Интерпретатор -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Справка -->
            <GroupBox Header="Легенда ПОЛИЗ" Grid.Row="0" Margin="0,0,0,5">
                <TextBlock TextWrapping="Wrap" FontFamily="Segoe UI" FontSize="12" Padding="5">
                    <Run FontWeight="Bold" Text="@name"/> — Адрес переменной, 
                    <Run FontWeight="Bold" Text="@!"/> — Безусловный переход, 
                    <Run FontWeight="Bold" Text="@F"/> — Переход по лжи, 
                    <Run FontWeight="Bold" Text="~RL"/> — Readln, 
                    <Run FontWeight="Bold" Text="~WL"/> — Writeln
                </TextBlock>
            </GroupBox>

            <!-- Консоль -->
            <GroupBox Header="Консоль выполнения" Grid.Row="1" Margin="0,0,0,5">
                <TextBox Text="{Binding ConsoleOutput}"
                         IsReadOnly="True"
                         TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Visible"
                         FontFamily="Consolas"
                         FontSize="14"
                         Background="#1E1E1E"
                         Foreground="#00FF00"
                         Padding="5"/>
            </GroupBox>

            <!-- Панель управления -->
            <Grid Grid.Row="2" Margin="0,0,0,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button Content="Запустить" Command="{Binding RunCommand}" 
                        Padding="15,5" Margin="0,0,10,0" FontWeight="Bold" Grid.Column="0"/>

                <TextBox Text="{Binding InputField, UpdateSourceTrigger=PropertyChanged}" 
                         IsEnabled="{Binding IsInputEnabled}"
                         Grid.Column="1" VerticalContentAlignment="Center"
                         FontFamily="Consolas" FontSize="14"
                         ToolTip="Введите значение здесь и нажмите Enter или кнопку Ввод"/>

                <Button Content="Ввод" Command="{Binding SubmitInputCommand}" 
                        IsEnabled="{Binding IsInputEnabled}"
                        IsDefault="True"
                        Grid.Column="2" Margin="5,0,0,0" Padding="10,5"/>
            </Grid>

            <!-- Статус -->
            <StatusBar Grid.Row="3">
                <StatusBarItem>
                    <TextBlock Text="{Binding StatusText}" FontWeight="SemiBold"/>
                </StatusBarItem>
            </StatusBar>
        </Grid>
    </Grid>
</UserControl>